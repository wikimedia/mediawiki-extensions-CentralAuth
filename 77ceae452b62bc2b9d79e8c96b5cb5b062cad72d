{
  "comments": [
    {
      "key": {
        "uuid": "0efd9372_2d925b00",
        "filename": "includes/CentralAuthHooks.php",
        "patchSetId": 2
      },
      "lineNbr": 846,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-06-17T15:20:07Z",
      "side": 1,
      "message": "Is this correct? Or should we still return locked/hidden status if the user doesn\u0027t exist locally but does centrally?\n\nIn other words,\n\n if ( $centralUser-\u003eexists()\n     \u0026\u0026 ( $centralUser-\u003eisAttached() || $user-\u003eisAnon() )\n     \u0026\u0026 $centralUser-\u003eisLocked()\n ) {",
      "revId": "77ceae452b62bc2b9d79e8c96b5cb5b062cad72d",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0efd9372_ffb8fa26",
        "filename": "includes/CentralAuthHooks.php",
        "patchSetId": 2
      },
      "lineNbr": 846,
      "author": {
        "id": 892
      },
      "writtenOn": "2016-06-17T16:19:55Z",
      "side": 1,
      "message": "AFAICS, when users are blocked from editing (see self::onGetUserPermissionsErrorsExpensive), it prevents editing only if the local user is attached to the central account. Checking isAnon() would be a behavioral change and would make it inconsistent, no?",
      "parentUuid": "0efd9372_2d925b00",
      "revId": "77ceae452b62bc2b9d79e8c96b5cb5b062cad72d",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0efd9372_1f95fe89",
        "filename": "includes/CentralAuthHooks.php",
        "patchSetId": 2
      },
      "lineNbr": 846,
      "author": {
        "id": 389
      },
      "writtenOn": "2016-06-17T16:33:09Z",
      "side": 1,
      "message": "If someone passes an anon user with a name, they probably want to know whether that central account is locked, and if they don\u0027t, they can easily check isAnon themselves. OTOH if this always returns false for isAnon and someone wants to learn whether the central account is locked, they have no way to do it.",
      "parentUuid": "0efd9372_ffb8fa26",
      "revId": "77ceae452b62bc2b9d79e8c96b5cb5b062cad72d",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0efd9372_ffe63a3e",
        "filename": "includes/CentralAuthHooks.php",
        "patchSetId": 2
      },
      "lineNbr": 846,
      "author": {
        "id": 892
      },
      "writtenOn": "2016-06-17T16:39:56Z",
      "side": 1,
      "message": "OK, makes sense.",
      "parentUuid": "0efd9372_1f95fe89",
      "revId": "77ceae452b62bc2b9d79e8c96b5cb5b062cad72d",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0efd9372_bfef92ad",
        "filename": "includes/CentralAuthHooks.php",
        "patchSetId": 2
      },
      "lineNbr": 846,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-06-17T18:42:20Z",
      "side": 1,
      "message": "For the record, not checking central lock status for a user that doesn\u0027t exist locally would have been the behavior change. User::isLocked() just calls $wgAuth-\u003egetUserInstance()-\u003eisLocked(), and that is just CentralAuthUser::getInstance() with no check for attachment or local-user existence.\n\nFor that matter, we\u0027re still changing behavior here in that a central lock will no longer affect a local unattached user, but that\u0027s probably a good bugfix.",
      "parentUuid": "0efd9372_ffb8fa26",
      "revId": "77ceae452b62bc2b9d79e8c96b5cb5b062cad72d",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0efd9372_9f81ee51",
        "filename": "includes/CentralAuthHooks.php",
        "patchSetId": 2
      },
      "lineNbr": 852,
      "author": {
        "id": 389
      },
      "writtenOn": "2016-06-17T16:22:22Z",
      "side": 1,
      "message": "Is there any point in letting the other hook subscribers run if we know that the user is locked?",
      "revId": "77ceae452b62bc2b9d79e8c96b5cb5b062cad72d",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0efd9372_df9a56bc",
        "filename": "includes/CentralAuthHooks.php",
        "patchSetId": 2
      },
      "lineNbr": 852,
      "author": {
        "id": 892
      },
      "writtenOn": "2016-06-17T16:27:16Z",
      "side": 1,
      "message": "How do I stop others from being run? Does returning false work?",
      "parentUuid": "0efd9372_9f81ee51",
      "revId": "77ceae452b62bc2b9d79e8c96b5cb5b062cad72d",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0efd9372_5fee6620",
        "filename": "includes/CentralAuthHooks.php",
        "patchSetId": 2
      },
      "lineNbr": 852,
      "author": {
        "id": 389
      },
      "writtenOn": "2016-06-17T16:33:09Z",
      "side": 1,
      "message": "Yes, just return false.",
      "parentUuid": "0efd9372_df9a56bc",
      "revId": "77ceae452b62bc2b9d79e8c96b5cb5b062cad72d",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}