{
  "comments": [
    {
      "key": {
        "uuid": "6e5a8fde_6590594f",
        "filename": "includes/CentralAuthPrimaryAuthenticationProvider.php",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 221
      },
      "writtenOn": "2017-11-06T16:28:18Z",
      "side": 1,
      "message": "Should the usernames be passed through wfEscapeWikiText()? That seems to have been the behavior of the AbortLogin hook that originally used this message, since the parameter was added in Ifb55a2e18.",
      "revId": "8671712fcbb8080babc29739aa02abd72d3a6a9f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e5a8fde_018154c8",
        "filename": "includes/CentralAuthPrimaryAuthenticationProvider.php",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 1453
      },
      "writtenOn": "2017-11-07T09:55:16Z",
      "side": 1,
      "message": "I don\u0027t think this makes sense in this context here. The code we are talking about here works with a Status object. That\u0027s all. It does not know if the output is going to be wikitext, HTML, or maybe plain text.\n\nTherefor I believe escaping can not be done here, but must be done later when the status is going to be used in an output.",
      "parentUuid": "6e5a8fde_6590594f",
      "revId": "8671712fcbb8080babc29739aa02abd72d3a6a9f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e5a8fde_afd067cd",
        "filename": "includes/CentralAuthPrimaryAuthenticationProvider.php",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 221
      },
      "writtenOn": "2017-11-07T15:45:46Z",
      "side": 1,
      "message": "On the other hand, whatever is using the Status object has no way of knowing which parameters, if any, need escaping. Some parameters intentionally contain HTML.",
      "parentUuid": "6e5a8fde_018154c8",
      "revId": "8671712fcbb8080babc29739aa02abd72d3a6a9f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e5a8fde_4f11b35e",
        "filename": "includes/CentralAuthPrimaryAuthenticationProvider.php",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 1453
      },
      "writtenOn": "2017-11-07T16:11:14Z",
      "side": 1,
      "message": "That sounds super-broken. \\StatusValue::getErrors does not say anything about the need to possibly escape unwanted HTML, or possibly having HTML in there intentionally.\n\nHow should consumers know if a parameter is plain, wikitext, or HTML?\n\n\\StatusValue::__toString happily prints out all errors including all \"params\" as plain text. Why should stuff appear wikitext escaped there? I mean, this would make sense if \\StatusValue::__toString would apply some kind of unescaping from an expected format, but this is not what it does.",
      "parentUuid": "6e5a8fde_afd067cd",
      "revId": "8671712fcbb8080babc29739aa02abd72d3a6a9f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}